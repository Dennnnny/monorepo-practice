## First try nx demo

This is a tutorial from nx
and it's [React Standalone](https://nx.dev/getting-started/react-standalone-tutorial)

# Web

<a href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨

## Development server

Run `nx serve web` for a dev server. Navigate to http://localhost:4200/. The app will automatically reload if you change any of the source files.

## Understand this workspace

Run `nx graph` to see a diagram of the dependencies of the projects.

## Remote caching

Run `npx nx connect-to-nx-cloud` to enable [remote caching](https://nx.app) and make CI faster.

## Further help

Visit the [Nx Documentation](https://nx.dev) to learn more.

---

# FEATURE

### generate

npx nx g @nrwl/react:application
npx nx g @nrwl/react:component
(-> npx nx g @nrwl/react:component input --project=shared-ui --export)
npx nx g @nrwl/react:lib / library

npx nx g @nrwl/workspace:lib --buildable

--directiory=XXX
--dry-run

- see tools
  npx nx list @nrwl/react

- storybook
  npx nx @nrwl/react:storybook-configuration
  npx nx @nrwl/react:component-story
  (-> npx nx g @nrwl/react:stories --project=shared-ui)
  npx nx @nrwl/react:story

  flag for ts
  --tsConfiguration=true

### graph

npx nx graph

# ISSUE

### run test

```
  ➜ web git:(main) ✗ npx nx test cart

  > nx run cart:test

  > NX Only file and data URLs are supported by the default ESM loader
  > Pass --verbose to see the stacktrace.
```

turns out: node version is too low
use 16.15.0, works

### dry-run

Cannot install required package @nrwl/jest during a dry run. Run the generator without --dryRun, or install the package with "npm install -D @nrwl/jest@15.4.5" and try again.

I think it's because I have no package @nrwl/jest,
if I did, I should be able to run dry-run

### Import

Buildable libraries cannot import or export from non-buildable libraries

=>
在建立 library 時 多帶一個 flag --buildable

```json
// package.json
{
  "name": "@web/shared/utils",
  "version": "0.0.1"
}
```

```json
// in project.json
"build": {
  "executor": "@nrwl/js:tsc",
    "outputs": ["{options.outputPath}"],
    "options": {
      "outputPath": "dist/shared/utils",
      "main": "shared/utils/src/index.ts",
      "tsConfig": "shared/utils/tsconfig.lib.json",
      "assets": ["shared/utils/*.md"]
    }
},
```

---

### Understand the deploy flow

1. in GCP Cloub build, setting configuration
2. make cloudbuild yaml
3. run build, building image
4. connect to k8s, let it know where to find this image

=>
to try it on github!!!

### Input tsx

ChangEvent<HTMLInputElement> : e.target.value

FormEvent<HTMLInputElement> : e.currentTarget.value

### run develope error...

when npx nx serve
NX Cannot find module 'node:path'
this error...
because node version 14 cannot use it
change to 16 fixed

to run another application:
npx nx serve [project-name]

### Dockerfile

1. add .dockerignore
2. build Dockerfile
   -> dockerfile is okay~

#### Issue of run docker image

-> because of ip connection something
so I have a trouble in run image
after change the cmd to " nx serve --host=0:0:0:0 "
it works... thanks Devin 🙏

I think I can go on with CI
